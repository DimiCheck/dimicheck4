<!DOCTYPE html>
<html lang="ko">
<!-- 로그인 버튼 연동은 맨 밑에 있어요 -->
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NX4P51JHZD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NX4P51JHZD');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <meta name="theme-color" content="#0b0f14"/>
  <meta name="application-name" content="DIMI Check"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <link rel="manifest" href="/manifest.webmanifest">
  <script defer src="/js/pwa.js"></script>
  <title>DIMI Check</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="src/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="src/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="src/favicon/favicon-16x16.png">
  <style>
    :root {
      --bg: #0b0f14;
      --bg-2: #0e1218;
      --card: rgba(255, 255, 255, .08);
      --card-2: rgba(255, 255, 255, .06);
      --text: #e9eef6;
      --muted: #a7b0c0;
      --primary: #d04fff;
      --primary-2: #ff6ad0;
      --ring: 0 0 0 8px color-mix(in oklab, var(--primary) 30%, transparent);
      --shadow: 0 10px 30px rgba(0, 0, 0, .45);
      --radius: 20px;
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f6f8fb;
        --bg-2: #eef2f8;
        --card: rgba(255, 255, 255, .75);
        --card-2: rgba(255, 255, 255, .6);
        --text: #0f172a;
        --muted: #5b6475;
        --primary: #d04fff;
        --primary-2: #ff6ad0;
        --shadow: 0 10px 30px rgba(57, 72, 103, .15);
      }
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: "Pretendard", system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, sans-serif;
      color: var(--text);
      background: var(--bg);
      display: grid;
      place-items: center;
      overflow: auto;
    }

    .blob-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
      background: radial-gradient(1200px 800px at 10% -10%, #5a6cff20, transparent 60%),
        radial-gradient(1200px 800px at 110% 10%, #ff009025, transparent 60%),
        radial-gradient(1000px 700px at 50% 120%, #ff00b325, transparent 60%);
    }

    .blob-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }

    .blob {
      position: absolute;
      inset: auto;
      filter: blur(40px);
      opacity: .6;
      pointer-events: none;
    }

    .b1 {
      width: 48vw;
      height: 48vw;
      background: radial-gradient(circle, #ff6a6a60, transparent 70%);
      top: -10vh;
      left: -10vw;
      animation: float 18s ease-in-out infinite;
    }

    .b2 {
      width: 42vw;
      height: 42vw;
      background: radial-gradient(circle, #e100ff50, transparent 70%);
      bottom: -15vh;
      right: -10vw;
      animation: float 22s ease-in-out infinite reverse;
    }

    .b3 {
      width: 36vw;
      height: 36vw;
      background: radial-gradient(circle, #ff6ae950, transparent 70%);
      top: 40vh;
      left: 10vw;
      animation: float 26s ease-in-out infinite;
    }

    @keyframes float {
      0%,
      100% {
        transform: translate(0, 0);
      }
      33% {
        transform: translate(15px, -20px);
      }
      66% {
        transform: translate(-15px, -10px);
      }
    }

    .shell {
      position: relative;
      width: min(1100px, 92vw);
      height: min(680px, 92vh);
      display: grid;
      grid-template-columns: 1.1fr .9fr;
      grid-template-areas: 'auth hero';
      gap: 18px;
      padding: 18px;
      z-index: 1;
    }

    @media (max-width: 960px) {
      .shell {
        grid-template-columns: 1fr;
        grid-template-areas: 'auth' 'hero';
        height: auto;
        padding: 20px;
        gap: 14px;
      }
    }

    .panel {
      position: relative;
      overflow: clip;
      border-radius: var(--radius);
      background: linear-gradient(180deg, var(--card), var(--card-2));
      backdrop-filter: saturate(140%) blur(14px);
      box-shadow: var(--shadow);
    }

    .hero {
      grid-area: hero;
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding: 28px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      letter-spacing: .2px;
    }

    .brand .logo {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      color: #fff;
      box-shadow: inset 0 0 18px #ffffff40;
    }

    .hero-cta {
      align-self: end;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .chip {
      border-radius: 999px;
      padding: 8px 12px;
      background: color-mix(in oklab, var(--card) 70%, rgba(255, 255, 255, .12));
      border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
      font-size: .88rem;
      color: var(--muted);
    }

    .bigcopy {
      align-self: center;
      padding: 10px 6px 24px;
    }

    .h1 {
      font-size: clamp(28px, 3.2vw, 44px);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -.02em;
      margin: 0 0 14px;
    }

    .p {
      margin: 0;
      color: var(--muted);
      font-size: clamp(14px, 1.7vw, 16px);
    }

    .illus {
      position: absolute;
      right: -6%;
      bottom: -6%;
      width: min(560px, 60%);
      opacity: .9;
      filter: drop-shadow(0 14px 30px rgba(0, 0, 0, .25));
      pointer-events: none;
    }

    @media (max-width: 960px) {
      .illus {
        position: static;
        width: 100%;
        margin-top: 14px;
      }

      .hero {
        padding: 20px;
      }
    }

    .auth {
      grid-area: auth;
      display: grid;
      grid-template-rows: auto 1fr;
      align-items: center;
      padding: 26px;
    }

    @media (max-width: 960px) {
      .auth {
        padding: 18px;
      }
    }

    .card {
      margin: 12px auto 0;
      width: min(420px, 100%);
      padding: 22px;
      border-radius: calc(var(--radius) + 6px);
      background: linear-gradient(180deg, rgba(255, 255, 255, .10), rgba(255, 255, 255, .06));
      border: 1px solid color-mix(in oklab, var(--text) 10%, transparent);
      /* box-shadow: var(--shadow); */
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 22px;
    }

    .card p {
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 14px;
    }

    .btn {
      appearance: none;
      border: 0;
      cursor: pointer;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 600;
      color: #0b0f14;
      background: #fff;
      box-shadow: 0 2px 0 rgba(0, 0, 0, .05);
      transition: transform .06s ease, box-shadow .2s ease;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, .4);
      transform: translate(-50%, -50%);
      transition: width .6s ease, height .6s ease;
    }

    .btn:active::before {
      width: 300px;
      height: 300px;
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn.ghost {
      background: transparent;
      color: var(--text);
      border: 1px solid color-mix(in oklab, var(--text) 12%, transparent);
      margin: 12px auto 8px auto;
    }

    .cta {
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      color: #fff;
      animation: pulse-glow 3s ease-in-out infinite;
    }

    .cta:hover {
      animation: pulse-glow 1.5s ease-in-out infinite;
      box-shadow: 0 8px 24px rgba(208, 79, 255, .4);
    }

    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 2px 0 rgba(0, 0, 0, .05), 0 0 20px rgba(208, 79, 255, .3);
      }
      50% {
        box-shadow: 0 2px 0 rgba(0, 0, 0, .05), 0 0 30px rgba(208, 79, 255, .5);
      }
    }

    .footer {
      text-align: center;
      color: var(--muted);
      font-size: 12px;
      margin-top: 16px;
    }

    .fade-up {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      filter: blur(10px);
      animation: rise .8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    .fade-up:nth-child(1) {
      animation-delay: .1s
    }

    .fade-up:nth-child(2) {
      animation-delay: .2s
    }

    .fade-up:nth-child(3) {
      animation-delay: .3s
    }

    .fade-up:nth-child(4) {
      animation-delay: .4s
    }

    @keyframes rise {
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
      }
    }

    .chip {
      transition: transform .3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow .3s ease;
    }

    .chip:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
    }

    .brand .logo {
      transition: transform .6s ease;
    }

    .brand:hover .logo {
      transform: rotate(360deg) scale(1.1);
    }

    @media (prefers-reduced-motion: reduce) {
      .blob {
        animation: none
      }

      .fade-up {
        opacity: 1;
        transform: none;
        filter: none;
        animation: none
      }

      .cta {
        animation: none;
      }

      .chip:hover {
        transform: none;
      }

      .brand .logo,
      .brand:hover .logo {
        transform: none;
      }
    }

    .legal-links {
      margin-top: 18px;
      text-align: center;
      font-size: 13px;
      color: var(--muted);
    }

    .legal-links a {
      color: inherit;
      text-decoration: underline;
    }
  </style>
</head>

<body>
  <div class="blob-container">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>

  <main class="shell" role="main">
    <section class="panel auth" aria-label="빠른 시작">
      <h3 id="login-title">학생 ᐧ 교사 통합 로그인</h3>
      <div class="card fade-up" role="region" aria-labelledby="login-title">
        <h2 id="login-title">시작하기</h2>
        <p>DimiCheck 오신 걸 환영합니다.</p>
        <div class="submit" style="display:grid; gap:10px; margin-top:14px">
          <label style="display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px">
            <input type="checkbox" id="rememberMe" checked style="accent-color:#d04fff" />
            로그인 유지
          </label>
          <button id="loginButton" class="btn cta" type="button" aria-label="로그인">
            <span id="loginButtonText">로그인</span>
          </button>
          <div class="footer" style="margin:0" id="legacySignup">
            아직 디풀 계정이 없나요?
            <button class="btn ghost" type="button" aria-label="디풀에서 계정 만들기"
              style="width:auto; padding:8px 12px">디풀에서 계정 만들기</button>
          </div>
        </div>
      </div>
    </section>

    <section class="panel hero" aria-label="브랜드 소개">
      <div class="brand fade-up" aria-label="브랜드">
        <img class="logo" aria-hidden="true" src="/src/dimicheck_templogo.png">
        <div>DimiCheck</div>
      </div>
      <div class="bigcopy fade-up">
        <h1 class="h1"><br />DimiCheck</h1>
        <p class="p">디미고를 위한 새로운 출결인증 플랫폼.</p>
      </div>
      <div class="hero-cta fade-up" aria-label="하이라이트">
        <div class="chip">간편한 출결 인증</div>
        <div class="chip">원격 상태 확인</div>
        <div class="chip">다양한 편의 기능</div>
      </div>
      <svg class="illus" viewBox="0 0 600 380" fill="none" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="var(--primary)" />
            <stop offset="100%" stop-color="var(--primary-2)" />
          </linearGradient>
        </defs>
        <rect x="30" y="40" width="540" height="300" rx="26" fill="url(#g)" opacity=".18" />
        <rect x="60" y="70" width="480" height="60" rx="14" fill="#fff" opacity=".14" />
        <rect x="60" y="150" width="240" height="180" rx="18" fill="#fff" opacity=".12" />
        <rect x="320" y="150" width="220" height="120" rx="18" fill="#fff" opacity=".1" />
        <circle cx="520" cy="110" r="10" fill="#fff" opacity=".8" />
        <circle cx="490" cy="110" r="10" fill="#fff" opacity=".6" />
        <circle cx="460" cy="110" r="10" fill="#fff" opacity=".4" />
      </svg>
    </section>
  </main>

  <p class="legal-links">
    <a href="/privacy.html">개인정보 처리방침</a>
  </p>

  <script>
    const loginBtn = document.getElementById('loginButton');
    const loginText = document.getElementById('loginButtonText');
    const rememberInput = document.getElementById('rememberMe');
    const legacySignup = document.getElementById('legacySignup');
    loginBtn?.addEventListener('click', () => {
      const remember = rememberInput?.checked ? 1 : 0;
      location.href = `/auth/login?remember=${remember}`;
    });
    legacySignup?.querySelector('button')?.addEventListener('click', () => {
      location.href = 'https://auth.dimigo.net/oauth?client=66207bf5d851264633e0e0a8&redirect=https://dimigo.net/auth?redirect=url';
    });
    fetch('/auth/mode')
      .then((res) => res.json())
      .then((data) => {
        if (data.use_dimicheck_oauth) {
          loginText.textContent = 'Google로 로그인';
          legacySignup.style.display = 'none';
        }
      })
      .catch(() => {});
  </script>
</body>

</html>
