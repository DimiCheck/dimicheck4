<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NX4P51JHZD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NX4P51JHZD');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <meta name="theme-color" content="#0b0f14"/>
  <meta name="application-name" content="DIMI Check"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <link rel="manifest" href="/manifest.webmanifest">
  <script defer src="/js/pwa.js?v={{ asset_version }}"></script>
  <title>DIMI Check</title>
  <link rel="stylesheet" href="main.css?v={{ asset_version }}">
  <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.x/dist/index.umd.js"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="src/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="src/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="src/favicon/favicon-16x16.png">
</head>
<body>
  <div
    id="connectionStatusBanner"
    class="connection-banner"
    role="status"
    aria-live="polite"
    hidden
  ></div>
  <!-- Magnet Container -->
  <div class="magnet-container" id="magnetContainer"></div>
  <div class="thought-layer" id="thoughtLayer"></div>

  <!-- 왼쪽 위: 기타 사유 패널 -->
  <div id="reasonPanel">
    <div class="panel-title">기타 사유</div>
    <div id="reasonList"></div>
  </div>

  <!-- Board Container -->
  <div class="board-container">
    <div class="board-title">상태창</div>
    <div class="board-grid">
      <div class="board-section" data-category="toilet">
        <div class="section-title">화장실(물)</div>
        <div class="section-content" id="toilet-content"></div>
      </div>
      <div class="board-section" data-category="hallway">
        <div class="section-title">복도</div>
        <div class="section-content" id="hallway-content"></div>
      </div>
      <div class="board-section" data-category="club">
        <div class="section-title">동아리</div>
        <div class="section-content" id="club-content"></div>
      </div>
      <div class="board-section" data-category="afterschool">
        <div class="section-title">방과후</div>
        <div class="section-content" id="afterschool-content"></div>
      </div>
      <div class="board-section" data-category="project">
        <div class="section-title">프로젝트</div>
        <div class="section-content" id="project-content"></div>
      </div>
      <div class="board-section" data-category="early">
        <div class="section-title">조기입실</div>
        <div class="section-content" id="early-content"></div>
      </div>
      <div class="board-section" data-category="etc">
        <div class="section-title">기타</div>
        <div class="section-content" id="etc-content"></div>
      </div>
      <div class="board-section" data-category="absence">
        <div class="section-title">결석(조퇴)</div>
        <div class="section-content" id="absence-content"></div>
      </div>
    </div>
  </div>

  <!-- Clock -->
  <div class="clock-container">
    <div class="analog-clock">
      <div class="clock-center"></div>
      <div class="hand hour-hand" id="hourHand"></div>
      <div class="hand minute-hand" id="minuteHand"></div>
      <div class="hand second-hand" id="secondHand"></div>
      <!-- Hour markers -->
      <div class="marker major" style="transform: translateX(-50%) rotate(0deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(30deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(60deg);"></div>
      <div class="marker major" style="transform: translateX(-50%) rotate(90deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(120deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(150deg);"></div>
      <div class="marker major" style="transform: translateX(-50%) rotate(180deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(210deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(240deg);"></div>
      <div class="marker major" style="transform: translateX(-50%) rotate(270deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(300deg);"></div>
      <div class="marker" style="transform: translateX(-50%) rotate(330deg);"></div>
    </div>

    <div class="digital-clock">
      <div class="time-display">
        <span id="hours">00</span>:<span id="minutes">00</span><span class="seconds" id="seconds">00</span>
      </div>
      <div class="date-display" id="date">MONDAY, JANUARY 1</div>
      <div class="tstat" id="tstat"></div>
    </div>
  </div>

  <!-- Attendance Info -->
  <div class="attendance-info">
    <div><span class="label">총원</span><span class="number" id="total-count">30명</span></div>
    <div><span class="label">결원</span><span class="number absent-count" id="absent-count">0명</span></div>
    <div><span class="label">현원</span><span class="number" id="present-count">30명</span></div>
    <div><span class="label">교실</span><span class="number" id="class-count">30명</span></div>
  </div>

  <!-- Fullscreen Buttons -->
  <button class="fullscreen-btn" onclick="toggleFullscreen()">전체화면</button>
  <button class="exit-fullscreen-btn" onclick="exitFullscreen()">✕</button>

  <!-- 급식 버튼 -->
  <div class="gfab-container" aria-live="polite">
    <button id="infoFab" class="fab" aria-haspopup="true" aria-expanded="false" aria-controls="infoMenu" title="게임 메뉴">
      <img src="src/infoicn.png" alt="정보"/>
    </button>
    <div id="infoMenu" class="fab-menu" role="menu">
      <button class="fab-item" role="menuitem" id="foodItem">오늘 급식 보기</button>
      <button class="fab-item" role="menuitem" id="timeItem">오늘 시간표</button>
      <button class="fab-item" role="menuitem" id="scheduleChangeItem">시간표 변경</button>
    </div>
  </div>

  <!-- 초기화 FAB -->
  <div class="ifab-container" aria-live="polite">
    <button id="resetButton" class="fab reset-fab" title="자리 초기화">초기화</button>
  </div>

  <!-- Fireworks canvas container -->
  <div class="fireworks" aria-hidden="true"></div>

  <!-- 이유 입력 다이얼로그 -->
  <div id="reasonOverlay" class="dialog-overlay" hidden>
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="reasonTitle">
      <div class="dialog-title" id="reasonTitle">어떤 이유인가요?</div>
      <textarea id="reasonInput" placeholder="예: 루돌프 사육, 굴뚝 기어오르기, 산타와 목욕탕 가기 등" rows="4" ></textarea>
      <div id="reasonQuickWrap" class="reason-quick">
        <div id="reasonButtons" class="reason-quick__grid"></div>
      </div>
      <div class="actions">
        <button id="reasonCancel" type="button">취소</button>
        <button id="reasonSave" class="primary" type="button">저장</button>
      </div>
    </div>
  </div>

  <div class="progress">
    <span id = "start-time">1</span>
    <progress id="progressbar" value="0" max="100">

    </progress>
    <span id = "end-time">1</span>
  </div>

  <div id="countdownOverlay" class="countdown-overlay" aria-hidden="true">
    <span id="countdownNumber" class="countdown-number"></span>
  </div>

  <!-- 시간표임. -->
  <div id="timetableModal" class="modal-overlay" hidden>
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2>주간 시간표</h2>
      <div class="timetable-controls">
        <select id="gradeSelector"></select>
        <select id="classSelector"></select>
      </div>
      <div id="timetableContainer"></div>
    </div>
  </div>

  <!-- 시간표 변경 팝업 -->
  <div id="scheduleModal" class="modal-overlay" style="display: none;">
    <div class="modal-content schedule-modal">
      <span class="modal-close" id="scheduleModalClose">&times;</span>
      <h2>시간표 변경</h2>
      <div class="schedule-list">
        <button class="schedule-item" data-schedule="weekday">
          <div class="schedule-title">평일 시간표 (기본)</div>
          <div class="schedule-desc">월~토 일반 수업 시간표</div>
        </button>
        <button class="schedule-item" data-schedule="sunday">
          <div class="schedule-title">일요일 시간표</div>
          <div class="schedule-desc">일요일 야자 시간표</div>
        </button>
        <button class="schedule-item" data-schedule="csat">
          <div class="schedule-title">수능 시간표</div>
          <div class="schedule-desc">수능 대비 특별 시간표</div>
        </button>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>


<script src="js/reset.js?v={{ asset_version }}"></script>

  <script src="js/storage.js?v={{ asset_version }}"></script>
  <script src="js/magnet.js?v={{ asset_version }}"></script>
  <script src="js/time.js?v={{ asset_version }}"></script>
  <script src="js/etc.js?v={{ asset_version }}"></script>
  <script src="js/info.js?v={{ asset_version }}"></script>
  <script src="js/reset.js?v={{ asset_version }}"></script>

</body>

</html>
